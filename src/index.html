<!DOCTYPE html>
<html>
  <head>
    <title>SpaceX Launches</title>
  </head>
  <body>
    <h1>SpaceX Launches</h1>
    <ul id="launch-list"></ul>

    <script>
      const API_BASE_URL = "https://api.spacexdata.com/v5/launches";

      const fetchUpcomingLaunches = async () => {
        const url = `${API_BASE_URL}/upcoming`;
        const response = await fetch(url);
        return await response.json();
      };

      const populateLaunchList = (launchStrings) => {
        const list = document.getElementById("launch-list");

        launchStrings.forEach((name) => {
          const item = document.createElement("li");
          const text = document.createTextNode(name);
          item.appendChild(text);
          list.appendChild(item);
        });
      };

      const sumLaunchCoreCounts = (launches) => {
        var counts = {};
        for (var i = 0; i < launches.length; i++) {
          var coreCount = launches[i].cores.length;
          if (counts[coreCount] == null) {
            counts[coreCount] = 0;
          }
          counts[coreCount]++;
        }
        return counts;
      };

      const main = async () => {
        const launches = await fetchUpcomingLaunches();
        populateLaunchList([]);

        const counts = sumLaunchCoreCounts(launches);
        // todo: display counts
      };

      main();
    </script>
  </body>
</html>
